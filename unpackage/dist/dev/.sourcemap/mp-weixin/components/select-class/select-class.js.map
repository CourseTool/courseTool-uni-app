{"version":3,"file":"select-class.js","sources":["components/select-class/select-class.vue","/Users/zhangrui/Library/Mobile Documents/com~apple~CloudDocs/Desktop/桌面/WeChatApp/course-wechat/components/select-class/select-class.vue?type=component"],"sourcesContent":["<template>\n\t<view class='select-class' v-if=\"isShowPage\">\n\t\t<div class=\"search-input\">\n\t\t\t<uni-icons type=\"search\" size=\"30\"></uni-icons>\n\t\t\t<input v-model=\"searchKey\" @input=\"searchClass\" type=\"text\" auto-focus :placeholder=\"getPlaceholder\" />\n\t\t</div>\n\t\t<div v-if=\"type === 'teacher'\" class=\"class-list\">\n\t\t\t<div class=\"empty\" v-if=\"filterClassList.length === 0\">\n\t\t\t\t<p>没有该老师</p>\n\t\t\t</div>\n\t\t\t<div @click='selectVal(c)' class=\"class-item\" v-for='c in filterClassList || classList' :key=\"c.id\">\n\t\t\t\t<div class=\"left-pic\">\n\t\t\t\t\t<span>{{c[0]}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"right-class-name\">\n\t\t\t\t\t<span>{{c}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if='type === \"classroom\"' class=\"class-list\">\n\t\t\t<div class=\"empty\" v-if=\"filterClassList.length === 0\">\n\t\t\t\t<p>没有该教室</p>\n\t\t\t</div>\n\t\t\t<div @click='selectVal(c.classroom)' class=\"class-item\" v-for='(c,index) in filterClassList || showList'\n\t\t\t\t:key=\"index\">\n\t\t\t\t<div class=\"left-pic\">\n\t\t\t\t\t<span>{{\"教室\"}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"right-class-name\">\n\t\t\t\t\t<span>{{c.classroom}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"type === 'student'\" class=\"class-list\">\n\t\t\t<div class=\"empty\" v-if=\"filterClassList.length === 0\">\n\t\t\t\t<p>没有该班级</p>\n\t\t\t</div>\n\t\t\t<div @click='selectVal(c)' class=\"class-item\" v-for='c in filterClassList || activeClassList' :key=\"c.id\">\n\t\t\t\t<div class=\"left-pic\">\n\t\t\t\t\t<span>{{c[0]}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"right-class-name\">\n\t\t\t\t\t<span>{{c}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"type === 'custom'\" class='class-list'>\n\t\t\t<div class=\"empty\" v-if=\"filterClassList.length === 0\">\n\t\t\t\t<p>没有响应的结果</p>\n\t\t\t</div>\n\t\t\t<div @click='selectVal(c)' class=\"class-item\" v-for='c in filterClassList || customDataList'>\n\t\t\t\t<div class=\"left-pic\">\n\t\t\t\t\t<span>{{c.value[0]}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"right-class-name\">\n\t\t\t\t\t<span>{{c.value}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tgetTeacherListAPI,\n\t\tgetActiveClassListAPI,\n\t\tgetClassroomListAPI,\n\t} from '@/API/course.js'\n\timport {\n\t\tonMounted,\n\t\tref,\n\t\tdefineEmits,\n\t\tdefineProps,\n\t\tcomputed\n\t} from 'vue';\n\n\tconst isShowPage = ref()\n\tconst props = defineProps(['type', 'dataList'])\n\tconst emit = defineEmits([\"hide-select-class\"])\n\tconst showList = ref([])\n\tconst filterClassList = ref([])\n\tconst searchKey = ref(\"\")\n\tconst showType = ref(\"\")\n\t// 展示课表的班级\n\tconst activeClassList = ref([])\n\t// 置顶的班级\n\tconst topClassList = [\"软件2303班\", \"软件2205班\", \"大数据会计2305班\"]\n\t// 置顶的老师\n\tconst topTeacherList = [\"吴宇飞\", \"李锡辉\", '王樱', '冯文韬', \"刘洁\"]\n\t// 自定义传进来的数据\n\tconst customDataList = ref([])\n\tlet timer = null\n\n\tconst getPlaceholder = computed(() => {\n\t\tconst placeholderMap = {\n\t\t\t\"student\": \"请输入你要搜索的班级\",\n\t\t\t\"classroom\": \"请输入你要搜索的教室\",\n\t\t\t\"teacher\": \"老师,请输入您的名字\",\n\t\t\t\"custom\": \"请输入你要搜索的内容\"\n\t\t}\n\t\treturn placeholderMap[props.type]\n\t})\n\n\t// 既可以选择班级又可以选择老师\n\tfunction selectVal(val) {\n\t\temit(\"hide-select-class\", val)\n\t}\n\n\tfunction searchClass() {\n\t\tif (timer) clearTimeout(timer)\n\t\ttimer = setTimeout(() => {\n\t\t\tif (props.type === \"teacher\") {\n\t\t\t\tfilterClassList.value = showList.value.filter((c) => c.tech_name.includes(searchKey.value)).map(\n\t\t\t\t\td => d.tech_name)\n\t\t\t} else if (props.type === \"classroom\") {\n\t\t\t\tfilterClassList.value = showList.value.filter((c) => c.classroom.includes(searchKey.value))\n\t\t\t} else if (props.type === 'student') {\n\t\t\t\tfilterClassList.value = showList.value.filter((c) => c.className.includes(searchKey.value)).map(\n\t\t\t\t\td => d.className)\n\t\t\t} else {\n\t\t\t\tfilterClassList.value = props.dataList.filter((c) => c.value.includes(searchKey.value))\n\t\t\t}\n\t\t}, 200)\n\t}\n\n\tasync function getShowList() {\n\t\tuni.showLoading({\n\t\t\ttitle: \"加载中...\"\n\t\t})\n\t\tswitch (showType.value) {\n\t\t\tcase \"teacher\":\n\t\t\t\tvar {\n\t\t\t\t\tdata\n\t\t\t\t} = await getTeacherListAPI()\n\t\t\t\tshowList.value = data.data\n\t\t\t\tfilterClassList.value = showList.value\n\t\t\t\tdata.data = data.data.map(d => d.tech_name)\n\t\t\t\tfilterClassList.value = new Set([...topTeacherList, ...data.data])\n\t\t\t\tbreak\n\t\t\tcase \"classroom\":\n\t\t\t\tvar {\n\t\t\t\t\tdata\n\t\t\t\t} = await getClassroomListAPI()\n\t\t\t\tshowList.value = data.data\n\t\t\t\tfilterClassList.value = showList.value\n\t\t\t\tbreak\n\t\t\tcase \"student\":\n\t\t\t\tvar res = await getActiveClassListAPI()\n\t\t\t\tshowList.value = res.data.data\n\t\t\t\tactiveClassList.value = res.data.data\n\t\t\t\tfilterClassList.value = new Set([...topClassList, ...res.data.data.map(d => d.className)])\n\t\t\t\tbreak\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tisShowPage.value = true\n\t\t\tuni.hideLoading()\n\t\t}, 100)\n\t}\n\n\tonMounted(async () => {\n\t\tshowType.value = props.type || \"student\"\n\t\tif (props.dataList) {\n\t\t\tcustomDataList.value = props.dataList\n\t\t\tfilterClassList.value = customDataList.value\n\t\t}\n\t\tgetShowList()\n\t})\n</script>\n\n<style lang=\"scss\">\n\t.select-class {\n\t\twidth: 100vw;\n\t\theight: 100vh;\n\t\tbackground-color: #f5f5f5;\n\t\tposition: absolute;\n\t\tinset: 0;\n\t\tz-index: 99999;\n\n\t\t.search-input {\n\t\t\twidth: 100%;\n\t\t\theight: 90rpx;\n\t\t\tbackground-color: #eaeaea;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\n\t\t\tinput {\n\t\t\t\twidth: 100%;\n\t\t\t\tfont-size: 30rpx;\n\t\t\t}\n\t\t}\n\n\t\t.class-list {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\t\t\tflex-direction: column;\n\n\t\t\t.empty {\n\t\t\t\twidth: 100vw;\n\t\t\t\theight: 50vh;\n\n\t\t\t\tfont-size: 40rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t}\n\n\t\t\t.class-item {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 120rpx;\n\t\t\t\tbackground-color: #fcfcfc;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: flex-start;\n\t\t\t\tpadding: 0 20rpx;\n\t\t\t\tborder: 1px solid #f5f5f5;\n\n\t\t\t\t.left-pic {\n\t\t\t\t\twidth: 80rpx;\n\t\t\t\t\theight: 80rpx;\n\t\t\t\t\tbackground: #eaeaea;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tcolor: #ccc;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tmargin-left: 10rpx;\n\t\t\t\t}\n\n\t\t\t\t.right-class-name {\n\t\t\t\t\tmargin-left: 10rpx;\n\t\t\t\t\tcolor: #3c3c3c;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import Component from '/Users/zhangrui/Library/Mobile Documents/com~apple~CloudDocs/Desktop/桌面/WeChatApp/course-wechat/components/select-class/select-class.vue'\nwx.createComponent(Component)"],"names":["ref","computed","uni","getTeacherListAPI","getClassroomListAPI","getActiveClassListAPI","onMounted","Component"],"mappings":"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"}