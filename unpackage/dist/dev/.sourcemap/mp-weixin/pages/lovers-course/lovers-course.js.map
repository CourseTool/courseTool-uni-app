{"version":3,"file":"lovers-course.js","sources":["pages/lovers-course/lovers-course.vue","pages/lovers-course/lovers-course.vue?type=page"],"sourcesContent":["<template>\r\n    <view class=\"lovers-course\" v-if=\"isShowPage\">\r\n        <div class=\"header\">\r\n            <div class=\"male\">\r\n                <p>男:</p>\r\n                <p @click=\"isShowMaleSelectClass = true\" style=\"text-decoration: underline\">{{ maleClass }}</p>\r\n                <select-class v-if=\"isShowMaleSelectClass\" type=\"student\" @hide-select-class=\"selectMaleClass\"></select-class>\r\n            </div>\r\n            <div class=\"icon\">\r\n                <uni-icons style=\"margin-right: -30rpx\" color=\"#6598d9\" type=\"heart-filled\" size=\"26\"></uni-icons>\r\n                <uni-icons color=\"#FFCCE1\" type=\"heart-filled\" size=\"26\"></uni-icons>\r\n            </div>\r\n            <div class=\"female\">\r\n                <p>女:</p>\r\n                <p @click=\"isShowFemaleSelectClass = true\" style=\"text-decoration: underline\">{{ femaleClass }}</p>\r\n                <select-class v-if=\"isShowFemaleSelectClass\" type=\"student\" @hide-select-class=\"selectFemaleClass\"></select-class>\r\n            </div>\r\n        </div>\r\n        <div @click=\"openCalendar\" class=\"date\">\r\n            <p style=\"text-decoration: underline\">{{ indexData.month }}月{{ indexData.day }}日</p>\r\n            <p class=\"week\">{{ indexData.week }}{{ indexData.weekDay }}</p>\r\n            <wu-calendar :lunar=\"true\" :date=\"currentDate\" ref=\"calendar\" @confirm=\"selectDate\" :insert=\"false\"></wu-calendar>\r\n        </div>\r\n        <div class=\"course-list\" v-if=\"Object.keys(courseDataList).length !== 0\">\r\n            <div class=\"course-item\" v-for=\"(data, z) in courseDataList\" :key=\"z\">\r\n                <div class=\"course\" v-for=\"(d, i) in data\">\r\n                    <div class=\"top-index\" v-if=\"i === 0\">\r\n                        <div class=\"section\">\r\n                            <p>{{ d.courseSection }}</p>\r\n                        </div>\r\n                        <div class=\"time\">\r\n                            <p>{{ timeStampMap[d.courseSection].replace(\" \", \"-\") }}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"bottom-course\" :class=\"{ female: d.courseClass === femaleClass }\">\r\n                        <div class=\"name\">\r\n                            <p class=\"title\">课程:</p>\r\n                            <p class=\"value\">{{ d.courseName }}</p>\r\n                        </div>\r\n                        <div class=\"icon\" v-if=\"i === 1\">\r\n                            <uni-icons style=\"margin-right: -30rpx\" color=\"#6598d9\" type=\"heart-filled\" size=\"26\"></uni-icons>\r\n                            <uni-icons color=\"#FFCCE1\" type=\"heart-filled\" size=\"26\"></uni-icons>\r\n                        </div>\r\n                        <div class=\"position\">\r\n                            <p class=\"title\">地点:</p>\r\n                            <p class=\"value\">{{ d.coursePosition }}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"empty\" v-else>\r\n            <p>你们今天没课噢,祝你们生活愉快</p>\r\n        </div>\r\n    </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, reactive } from \"vue\";\r\nimport { getLoversCourseAPI } from \"@/API/course.js\";\r\nimport { getCurrentDate, timeStampMap } from \"@/uilts/time.js\";\r\n\r\nconst maleClass = ref(\"\");\r\nconst femaleClass = ref(\"\");\r\nconst isShowMaleSelectClass = ref(false);\r\nconst isShowFemaleSelectClass = ref(false);\r\nconst isShowPage = ref(false);\r\nconst indexData = reactive({\r\n    maleClass,\r\n    femaleClass,\r\n    week: \"\",\r\n    weekDay: \"\",\r\n    month: \"\",\r\n    day: \"\",\r\n});\r\nconst courseDataList = ref([]);\r\nconst calendar = ref(null);\r\nconst currentDate = ref(\"\");\r\n// 节次排序\r\nconst sectionSortIndex = {\r\n    第一大节: 1,\r\n    第二大节: 2,\r\n    第三大节: 3,\r\n    第四大节: 4,\r\n    第五大节: 5,\r\n    第六大节: 6,\r\n};\r\n\r\nfunction sortTeacherCourseSection() {\r\n    const a = Object.values(courseDataList.value).sort((a, b) => {\r\n        return sectionSortIndex[a[0].courseSection] - sectionSortIndex[b[0].courseSection];\r\n    });\r\n    const result = {};\r\n    Object.keys(sectionSortIndex).forEach((k, i) => {\r\n        if (a[i]) {\r\n            result[k] = a[i];\r\n        }\r\n    });\r\n    courseDataList.value = result;\r\n}\r\n\r\nfunction openCalendar() {\r\n    calendar.value.open();\r\n}\r\n\r\nfunction selectDate(e) {\r\n    const data = {\r\n        month: e.month,\r\n        day: e.date,\r\n        year: e.year,\r\n    };\r\n    currentDate.value = `${data.year}-${data.month}-${data.day}`;\r\n    const { weekStr, weekDay } = getCurrentDate(data);\r\n    indexData.week = weekStr;\r\n    indexData.weekDay = weekDay;\r\n    indexData.day = e.date;\r\n    indexData.month = e.month;\r\n    getCourse();\r\n}\r\n\r\nfunction selectMaleClass(val) {\r\n    maleClass.value = val;\r\n    isShowMaleSelectClass.value = false;\r\n    getCourse();\r\n    uni.setStorageSync(\"lovers-male-class\", val);\r\n}\r\n\r\nfunction selectFemaleClass(val) {\r\n    femaleClass.value = val;\r\n    isShowFemaleSelectClass.value = false;\r\n    getCourse();\r\n    uni.setStorageSync(\"lovers-female-class\", val);\r\n}\r\n\r\nasync function getCourse() {\r\n    uni.showLoading({\r\n        title: \"加载中...\",\r\n    });\r\n    const res = await getLoversCourseAPI(indexData);\r\n    courseDataList.value = res.data.data;\r\n    sortTeacherCourseSection();\r\n    uni.hideLoading();\r\n    isShowPage.value = true;\r\n}\r\n\r\nonMounted(() => {\r\n    const { weekStr, weekDay } = getCurrentDate();\r\n    const date = new Date();\r\n    indexData.week = weekStr;\r\n    indexData.weekDay = weekDay;\r\n    indexData.day = date.getDate();\r\n    indexData.month = date.getMonth() + 1;\r\n    indexData.maleClass = uni.getStorageSync(\"lovers-male-class\") || \"软件2303班\";\r\n    indexData.femaleClass = uni.getStorageSync(\"lovers-female-class\") || \"大数据会计2305班\";\r\n    getCourse();\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.lovers-course {\r\n    min-height: 100vh;\r\n    padding-bottom: 30rpx;\r\n    background-color: #fbeded;\r\n\r\n    .header {\r\n        padding: 20rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        background-color: #f3f3f3;\r\n\r\n        .icon {\r\n            width: fit-content;\r\n            margin: 0 20rpx;\r\n        }\r\n\r\n        > view {\r\n            width: 280rpx;\r\n            display: flex;\r\n            align-items: center;\r\n            word-break: keep-all;\r\n        }\r\n\r\n        .male {\r\n            justify-content: flex-end;\r\n            color: #6598d9;\r\n        }\r\n\r\n        .female {\r\n            justify-content: flex-start;\r\n            color: #f286e5;\r\n        }\r\n    }\r\n\r\n    .date {\r\n        margin-top: 20rpx;\r\n        padding: 20rpx;\r\n        font-size: 34rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        color: #333;\r\n        font-size: 44rpx;\r\n        font-weight: bolder;\r\n        letter-spacing: 5rpx;\r\n\r\n        .week {\r\n            font-size: 30rpx;\r\n        }\r\n    }\r\n\r\n    .course-list {\r\n        padding: 0 20rpx;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        flex-direction: column;\r\n        margin-top: 20rpx;\r\n\r\n        .course-item {\r\n            margin-top: 30rpx;\r\n            width: 94vw;\r\n\r\n            .course:first-child {\r\n                .bottom-course {\r\n                    margin-top: 20rpx;\r\n                }\r\n            }\r\n\r\n            .course {\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                flex-direction: column;\r\n\r\n                .top-index {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    flex-direction: column;\r\n                    color: #333;\r\n                    margin-right: 20rpx;\r\n                    font-weight: bold;\r\n\r\n                    > view {\r\n                        width: fit-content;\r\n                        word-break: keep-all;\r\n                    }\r\n\r\n                    .time {\r\n                        color: #3c3c3c;\r\n                        font-size: 24rpx;\r\n                    }\r\n                }\r\n\r\n                .bottom-course {\r\n                    width: 68vw;\r\n                    padding: 10rpx 15rpx;\r\n                    background-color: #e9f3fb;\r\n                    border-radius: 10rpx;\r\n                    border: 1px solid #c3d8ee;\r\n                    position: relative;\r\n\r\n                    .icon {\r\n                        margin: 0;\r\n                        position: absolute;\r\n                        top: 0;\r\n                        left: 50%;\r\n                        transform: translate(-50%, -50%);\r\n                        z-index: 1;\r\n                    }\r\n\r\n                    > view {\r\n                        margin: 10rpx 0;\r\n                        display: flex;\r\n                        align-items: flex-start;\r\n                        justify-content: flex-start;\r\n                        color: #6598d9;\r\n\r\n                        .title {\r\n                            font-size: 30rpx;\r\n                            font-weight: bold;\r\n                            margin-right: 10rpx;\r\n                            width: fit-content;\r\n                            word-break: keep-all;\r\n                        }\r\n\r\n                        .value {\r\n                            font-size: 30rpx;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                .female {\r\n                    background-color: #ffddee;\r\n                    border-color: #ffcce1;\r\n\r\n                    > view {\r\n                        color: #f286e5;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .empty {\r\n        margin-top: 36rpx;\r\n        text-align: center;\r\n        font-size: 34rpx;\r\n        color: #0497ff;\r\n    }\r\n}\r\n</style>\r\n","import MiniProgramPage from '/Users/zhangrui/Library/Mobile Documents/com~apple~CloudDocs/Desktop/桌面/WeChatApp/course-wechat/pages/lovers-course/lovers-course.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","a","getCurrentDate","uni","getLoversCourseAPI","onMounted","MiniProgramPage"],"mappings":"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"}