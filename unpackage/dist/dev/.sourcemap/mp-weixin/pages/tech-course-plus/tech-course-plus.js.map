{"version":3,"file":"tech-course-plus.js","sources":["pages/tech-course-plus/tech-course-plus.vue","pages/tech-course-plus/tech-course-plus.vue?type=page"],"sourcesContent":["<template>\n    <view class=\"course-plus\" v-if=\"isShowPage\">\n        <div class=\"header\">\n            <div class=\"right-week\">\n                <picker @change=\"changeWeek\" :value=\"weekIndex\" :range=\"weekList\">\n                    <view class=\"uni-input\">{{ weekList[weekIndex] }}<uni-icons color=\"#fff\" type=\"down\" size=\"22\"></uni-icons> </view>\n                </picker>\n            </div>\n            <div @click=\"isShowSelectClass = true\" class=\"center-class\">\n                <p style=\"text-decoration: underline\">{{ indexData.teacherName }}(更改)</p>\n            </div>\n            <div @click=\"gotoCurrent\" style=\"text-decoration: underline\" class=\"right-reset\">\n                <p>今天</p>\n            </div>\n            <select-class type=\"teacher\" @hide-select-class=\"hiddenSelectClass\" v-if=\"isShowSelectClass\"></select-class>\n        </div>\n        <div class=\"course-calendar\">\n            <div class=\"top-week-day\">\n                <div class=\"week-day-item\" v-for=\"d in weekDayList\">\n                    <p>{{ d.weekDay }}</p>\n                    <p>{{ d.day }}</p>\n                </div>\n            </div>\n            <div class=\"content-main\">\n                <div class=\"left-section\">\n                    <div class=\"section-item\">\n                        <p>一</p>\n                        <p>8.30</p>\n                        <p>|</p>\n                        <p>10.00</p>\n                    </div>\n                    <div class=\"section-item\">\n                        <p>二</p>\n                        <p>10.20</p>\n                        <p>|</p>\n                        <p>11.50</p>\n                    </div>\n                    <div class=\"section-item\">\n                        <p>三</p>\n                        <p>14.00</p>\n                        <p>|</p>\n                        <p>15.30</p>\n                    </div>\n                    <div class=\"section-item\">\n                        <p>四</p>\n                        <p>15.50</p>\n                        <p>|</p>\n                        <p>17.20</p>\n                    </div>\n                    <div class=\"section-item\">\n                        <p>五</p>\n                        <p>18.40</p>\n                        <p>|</p>\n                        <p>20.10</p>\n                    </div>\n                    <div class=\"section-item\">\n                        <p>六</p>\n                        <p>20.20</p>\n                        <p>|</p>\n                        <p>21.50</p>\n                    </div>\n                </div>\n                <div class=\"right-course-list\">\n                    <div v-for=\"data in weekCourseList\" class=\"course-list one\">\n                        <view class=\"course-plus-item empty\" v-for=\"i in 6\" :key=\"i\">\n                            <p>没课</p>\n                        </view>\n                        <course-plus-item :isTeacher=\"true\" :data=\"d\" v-for=\"(d, i) in data\" :key=\"i\"></course-plus-item>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </view>\n</template>\n\n<script setup>\nimport { getTechCourseForWeekAPI } from \"@/API/course.js\";\nimport { ref, onMounted, watch } from \"vue\";\nimport { getCurrentDate, getDateByWeek } from \"@/uilts/time.js\";\n\nconst isShowPage = ref(false);\nconst weekCourseList = ref([]);\nconst indexData = ref({\n    teacherName: \"\",\n    week: \"\",\n});\nconst isShowSelectClass = ref(false);\nconst weekList = ref([]);\nconst weekIndex = ref(0);\nconst weekDayList = ref([]);\n\nfunction gotoCurrent() {\n    const { weekStr } = getCurrentDate();\n    indexData.value.week = weekStr;\n    weekIndex.value = weekList.value.indexOf(weekStr);\n    weekDayList.value = getDateByWeek(weekIndex.value + 1);\n}\n\nfunction changeWeek(e) {\n    weekIndex.value = e.detail.value;\n    indexData.value.week = weekList.value[weekIndex.value];\n}\n\nfunction initWeekList() {\n    for (let i = 1; i <= 25; i++) {\n        weekList.value.push(\"第\" + i + \"周\");\n    }\n    const { weekStr } = getCurrentDate();\n    indexData.value.week = weekStr;\n    weekIndex.value = weekList.value.indexOf(weekStr);\n}\n\nfunction hiddenSelectClass(val) {\n    indexData.value.teacherName = val;\n    isShowSelectClass.value = false;\n    getCourseData();\n    uni.setStorageSync(\"home-active-type\", \"teacher\");\n    uni.setStorageSync(\"home-active-val\", val);\n}\n\nfunction groupTechCourseList() {\n    const result = {\n        星期一: [],\n        星期二: [],\n        星期三: [],\n        星期四: [],\n        星期五: [],\n        星期六: [],\n        星期日: [],\n    };\n    weekCourseList.value.forEach(d => {\n        result[d.courseWeekDay].push(d);\n    });\n    return result;\n}\n\nasync function getCourseData() {\n    uni.showLoading({\n        title: \"加载中....\",\n    });\n    weekCourseList.value = [];\n    const res = await getTechCourseForWeekAPI(indexData.value);\n    weekCourseList.value = res.data.data;\n    weekCourseList.value = groupTechCourseList();\n    setTimeout(() => {\n        uni.hideLoading();\n        isShowPage.value = true;\n    }, 150);\n}\n\nwatch(indexData.value, () => {\n    getCourseData();\n});\n\nonMounted(() => {\n    initWeekList();\n    indexData.value.teacherName = uni.getStorageSync(\"home-active-type\") === \"teacher\" ? uni.getStorageSync(\"home-active-val\") : \"吴宇飞\";\n    weekDayList.value = getDateByWeek(weekIndex.value + 1);\n});\n</script>\n\n<style lang=\"scss\">\n.course-plus {\n    .header {\n        padding: 20rpx;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n\n        .right-week {\n            width: 190rpx;\n            height: 70rpx;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            background-color: #0497ff;\n            color: #fff;\n            border-radius: 20rpx;\n\n            :deep(.uni-input) {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            :deep(.uniui-down) {\n                margin-left: 10rpx;\n            }\n\n            view {\n                margin-right: 20rpx;\n            }\n        }\n    }\n\n    .course-calendar {\n        margin-top: 10rpx;\n\n        .top-week-day {\n            background-color: #fafafa;\n            padding: 10rpx;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            font-size: 24rpx;\n            color: #333;\n            padding-left: 60rpx;\n\n            .week-day-item {\n                width: 100rpx;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                flex-direction: column;\n            }\n        }\n\n        .content-main {\n            padding: 10rpx;\n            padding-top: 0;\n            display: flex;\n            align-items: flex-start;\n            justify-content: flex-start;\n\n            .left-section {\n                font-size: 18rpx;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                flex-direction: column;\n                margin-right: 15rpx;\n                height: 85vh;\n\n                view {\n                    text-align: center;\n                }\n\n                .section-item {\n                    view:first-child {\n                        font-size: 22rpx;\n                        font-weight: bolder;\n                    }\n                }\n\n                .section-item:first-child {\n                    margin-top: 70rpx;\n                }\n            }\n\n            .right-course-list {\n                width: 90vw;\n                position: relative;\n                display: flex;\n                align-items: center;\n                justify-content: flex-start;\n\n                .empty {\n                    width: 55rpx;\n                    height: 160rpx;\n                    padding: 15rpx;\n                    border-radius: 10rpx;\n                    font-size: 20rpx;\n                    background-color: #fff !important;\n                    border: 1px solid #c3d8ee !important;\n                    color: #6598d9 !important;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                }\n\n                .empty {\n                    margin-top: 25rpx;\n                }\n\n                .course-list {\n                    width: 100rpx;\n                    height: 100%;\n                    position: relative;\n                    display: flex;\n                    align-items: center;\n                    justify-content: flex-start;\n                    flex-direction: column;\n                }\n            }\n\n            // .left-section {\n            // \tfont-size: 20rpx;\n            // \tcolor: #333;\n\n            // \t.section-item {\n            // \t\tmargin-top: 70rpx;\n            // \t}\n            // }\n        }\n    }\n}\n</style>\n","import MiniProgramPage from '/Users/zhangrui/Library/Mobile Documents/com~apple~CloudDocs/Desktop/桌面/WeChatApp/course-wechat/pages/tech-course-plus/tech-course-plus.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getCurrentDate","getDateByWeek","uni","getTechCourseForWeekAPI","watch","onMounted","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;;;AAgFA,UAAM,aAAaA,cAAAA,IAAI,KAAK;AAC5B,UAAM,iBAAiBA,cAAAA,IAAI,CAAA,CAAE;AAC7B,UAAM,YAAYA,cAAAA,IAAI;AAAA,MAClB,aAAa;AAAA,MACb,MAAM;AAAA,IACV,CAAC;AACD,UAAM,oBAAoBA,cAAAA,IAAI,KAAK;AACnC,UAAM,WAAWA,cAAAA,IAAI,CAAA,CAAE;AACvB,UAAM,YAAYA,cAAAA,IAAI,CAAC;AACvB,UAAM,cAAcA,cAAAA,IAAI,CAAA,CAAE;AAE1B,aAAS,cAAc;AACnB,YAAM,EAAE,YAAYC,WAAAA;AACpB,gBAAU,MAAM,OAAO;AACvB,gBAAU,QAAQ,SAAS,MAAM,QAAQ,OAAO;AAChD,kBAAY,QAAQC,WAAa,cAAC,UAAU,QAAQ,CAAC;AAAA,IACzD;AAEA,aAAS,WAAW,GAAG;AACnB,gBAAU,QAAQ,EAAE,OAAO;AAC3B,gBAAU,MAAM,OAAO,SAAS,MAAM,UAAU,KAAK;AAAA,IACzD;AAEA,aAAS,eAAe;AACpB,eAAS,IAAI,GAAG,KAAK,IAAI,KAAK;AAC1B,iBAAS,MAAM,KAAK,MAAM,IAAI,GAAG;AAAA,MACpC;AACD,YAAM,EAAE,YAAYD,WAAAA;AACpB,gBAAU,MAAM,OAAO;AACvB,gBAAU,QAAQ,SAAS,MAAM,QAAQ,OAAO;AAAA,IACpD;AAEA,aAAS,kBAAkB,KAAK;AAC5B,gBAAU,MAAM,cAAc;AAC9B,wBAAkB,QAAQ;AAC1B;AACAE,oBAAAA,MAAI,eAAe,oBAAoB,SAAS;AAChDA,oBAAAA,MAAI,eAAe,mBAAmB,GAAG;AAAA,IAC7C;AAEA,aAAS,sBAAsB;AAC3B,YAAM,SAAS;AAAA,QACX,KAAK,CAAE;AAAA,QACP,KAAK,CAAE;AAAA,QACP,KAAK,CAAE;AAAA,QACP,KAAK,CAAE;AAAA,QACP,KAAK,CAAE;AAAA,QACP,KAAK,CAAE;AAAA,QACP,KAAK,CAAE;AAAA,MACf;AACI,qBAAe,MAAM,QAAQ,OAAK;AAC9B,eAAO,EAAE,aAAa,EAAE,KAAK,CAAC;AAAA,MACtC,CAAK;AACD,aAAO;AAAA,IACX;AAEA,mBAAe,gBAAgB;AAC3BA,oBAAAA,MAAI,YAAY;AAAA,QACZ,OAAO;AAAA,MACf,CAAK;AACD,qBAAe,QAAQ;AACvB,YAAM,MAAM,MAAMC,WAAAA,wBAAwB,UAAU,KAAK;AACzD,qBAAe,QAAQ,IAAI,KAAK;AAChC,qBAAe,QAAQ;AACvB,iBAAW,MAAM;AACbD,sBAAG,MAAC,YAAW;AACf,mBAAW,QAAQ;AAAA,MACtB,GAAE,GAAG;AAAA,IACV;AAEAE,kBAAAA,MAAM,UAAU,OAAO,MAAM;AACzB;IACJ,CAAC;AAEDC,kBAAAA,UAAU,MAAM;AACZ;AACA,gBAAU,MAAM,cAAcH,cAAAA,MAAI,eAAe,kBAAkB,MAAM,YAAYA,cAAAA,MAAI,eAAe,iBAAiB,IAAI;AAC7H,kBAAY,QAAQD,WAAa,cAAC,UAAU,QAAQ,CAAC;AAAA,IACzD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7JD,GAAG,WAAWK,SAAe;"}