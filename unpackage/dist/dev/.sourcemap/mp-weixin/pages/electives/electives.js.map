{"version":3,"file":"electives.js","sources":["pages/electives/electives.vue","pages/electives/electives.vue?type=page"],"sourcesContent":["<template>\n\t<view class='electives'>\n\t\t<div class=\"title\">\n\t\t\t<p>选修课查询</p>\n\t\t</div>\n\t\t<div class=\"time\">\n\t\t\t<p>当前日期:{{currentDate.week}}{{currentDate.weekDay}}</p>\n\t\t</div>\n\t\t<select-class :type='isSelectTeacher ? \"teacher\" : \"classroom\"' v-if='isSelectTeacher || isSelectClassroom'\n\t\t\t@hide-select-class='hiddenSelectVal'></select-class>\n\t\t<div class=\"input-list\">\n\t\t\t<div @click='isSelectTeacher = true' class=\"teacher\">\n\t\t\t\t<p>{{indexData.teacher}}</p>\n\t\t\t</div>\n\t\t\t<div @click='isSelectClassroom = true' class=\"position\">\n\t\t\t\t<p>{{indexData.classroom}}</p>\n\t\t\t</div>\n\t\t\t<div @click='isSelectSection = true' class=\"section\">\n\t\t\t\t<picker mode=\"selector\" :range=\"sectionList\" @change=\"selectSection\">\n\t\t\t\t\t<view>{{indexData.section}}</view>\n\t\t\t\t</picker>\n\t\t\t</div>\n\t\t</div>\n\t\t<div @click='searchCourse' class=\"search\">\n\t\t\t<p>查询</p>\n\t\t</div>\n\t\t<div v-if='!!courseDataList.length' class=\"course\">\n\t\t\t<div class=\"title\">\n\t\t\t\t<p>{{courseDataList[0].courseSection}}</p>\n\t\t\t\t<p>{{sectionTimeMap[courseDataList[0].courseSection]}}</p>\n\t\t\t</div>\n\t\t\t<div class=\"name\">\n\t\t\t\t<p>课程:</p>\n\t\t\t\t<span>{{courseDataList[0].courseName}}</span>\n\t\t\t</div>\n\t\t\t<div class=\"position\">\n\t\t\t\t<p>地点:</p>\n\t\t\t\t<span>{{courseDataList[0].coursePosition}}</span>\n\t\t\t</div>\n\t\t\t<div class=\"teacher\">\n\t\t\t\t<p>教师:</p>\n\t\t\t\t<span>{{courseDataList[0].courseTeacher}}</span>\n\t\t\t</div>\n\t\t\t<div class=\"week\">\n\t\t\t\t<p>周次:</p>\n\t\t\t\t<span>{{courseDataList[0].courseWeek.replaceAll(\"周\",\"\")}}</span>\n\t\t\t</div>\n\t\t\t<div class=\"week\">\n\t\t\t\t<p>星期:</p>\n\t\t\t\t<span>{{courseDataList[0].courseWeekDay}}</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else class='empty'>\n\t\t\t<p>无选修课</p>\n\t\t</div>\n\t\t<div @click=\"injectToCourse\" class=\"inject\">\n\t\t\t<p>导入到课表</p>\n\n\t\t</div>\n\t\t<p class='injected-count'>你当前已导入{{electivesData.length}}节选修课</p>\n\t\t<div @click='remove' class=\"remove\">\n\t\t\t<p>删除选修课</p>\n\t\t</div>\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\treactive,\n\t\tref,\n\t\tonMounted\n\t} from 'vue'\n\timport {\n\t\tgetElectivesAPI\n\t} from '@/API/course.js'\n\timport {\n\t\tgetCurrentDate\n\t} from \"@/uilts/time.js\"\n\n\n\tconst isSelectTeacher = ref(false)\n\tconst isSelectClassroom = ref(false)\n\tconst isSelectSection = ref(false)\n\n\tconst currentDate = reactive({\n\t\tweek: \"\",\n\t\tweekDay: \"\"\n\t})\n\tconst indexData = reactive({\n\t\tteacher: \"选择老师\",\n\t\tclassroom: \"选择教室\",\n\t\tsection: \"选择节次\"\n\t})\n\tconst sectionList = [\"第一大节\", \"第二大节\", \"第三大节\", \"第四大节\", \"第五大节\", \"第六大节\"]\n\tconst courseDataList = ref([])\n\tconst sectionTimeMap = {\n\t\t\"第一大节\": \"8.30-10.00\",\n\t\t\"第二大节\": \"10.20-11.50\",\n\t\t\"第三大节\": \"14.00-15.30\",\n\t\t\"第四大节\": \"15.50-17.20\",\n\t\t\"第五大节\": \"18.40-20.10\",\n\t\t\"第六大节\": \"20.20-21.50\"\n\t}\n\tconst electivesData = ref([])\n\n\tfunction remove() {\n\t\tuni.showModal({\n\t\t\ttitle: '提示',\n\t\t\tcontent: '你确定要删除所有已添加到选修课嘛?',\n\t\t\tsuccess: function(res) {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tuni.removeStorageSync(\"electivesDataList\")\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"删除成功!\",\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t\telectivesData.value = []\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction injectToCourse() {\n\t\tif (courseDataList.value.length === 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: \"无选修课导入!\",\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tconst electivesDataList = uni.getStorageSync(\"electivesDataList\") || []\n\t\telectivesDataList.push(courseDataList.value)\n\t\tuni.setStorageSync(\"electivesDataList\", electivesDataList)\n\t\telectivesData.value = uni.getStorageSync(\"electivesDataList\")\n\t\tuni.showToast({\n\t\t\ttitle: \"导入成功!\",\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\tfunction hiddenSelectVal(val) {\n\t\tif (isSelectTeacher.value) {\n\t\t\tindexData.teacher = val\n\t\t\tuni.setStorageSync('electivesTech', val)\n\t\t} else {\n\t\t\tindexData.classroom = val\n\t\t\tuni.setStorageSync('electivesClassroom', val)\n\t\t}\n\t\tisSelectClassroom.value = false\n\t\tisSelectTeacher.value = false\n\t}\n\n\tfunction selectSection(e) {\n\t\tindexData.section = sectionList[+e.detail.value]\n\t\tuni.setStorageSync('electivesSection', indexData.section)\n\t}\n\n\tasync function searchCourse() {\n\n\t\tif (indexData.classroom === \"选择教室\" || indexData.section === \"选择节次\" || indexData.teacher === \"选择老师\") {\n\t\t\treturn\n\t\t}\n\n\t\tuni.showLoading({\n\t\t\ttitle: \"加载中...\"\n\t\t})\n\t\tconst res = await getElectivesAPI(indexData)\n\t\tcourseDataList.value = res.data.data\n\t\tuni.hideLoading()\n\t}\n\n\tonMounted(() => {\n\t\tconst {\n\t\t\tweek,\n\t\t\tweekDay\n\t\t} = getCurrentDate()\n\t\tcurrentDate.week = week\n\t\tcurrentDate.weekDay = weekDay\n\t\tindexData.teacher = uni.getStorageSync(\"electivesTech\") || \"选择老师\"\n\t\tindexData.classroom = uni.getStorageSync(\"electivesClassroom\") || \"选择教室\"\n\t\tindexData.section = uni.getStorageSync(\"electivesSection\") || \"选择节次\"\n\t\telectivesData.value = uni.getStorageSync(\"electivesDataList\") || []\n\t\tsearchCourse()\n\t})\n</script>\n\n<style lang=\"scss\">\n\t.electives {\n\t\tpadding: 20rpx 0;\n\n\t\t.title {\n\t\t\ttext-align: center;\n\t\t\tfont-size: 50rpx;\n\t\t}\n\n\t\t.time {\n\t\t\ttext-align: center;\n\t\t\tfont-size: 34rpx;\n\t\t\tmargin: 20rpx 0;\n\t\t}\n\n\t\t.input-list {\n\t\t\twidth: 80vw;\n\t\t\tmargin: 0 auto;\n\t\t\tmargin-top: 40rpx;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\t\t\tfont-size: 34rpx;\n\t\t\ttext-decoration: underline;\n\t\t\tcolor: #0497FF;\n\t\t}\n\n\t\t.search {\n\t\t\tmargin: 0 auto;\n\t\t\tmargin-top: 30rpx;\n\t\t\twidth: 200rpx;\n\t\t\theight: 70rpx;\n\t\t\tbackground: #0497FF;\n\t\t\tcolor: #fff;\n\t\t\tfont-size: 32rpx;\n\t\t\ttext-align: center;\n\t\t\tline-height: 70rpx;\n\t\t\tborder-radius: 10rpx;\n\t\t}\n\n\t\t.course {\n\t\t\twidth: 85vw;\n\t\t\tpadding: 5px;\n\t\t\tborder-radius: 10rpx;\n\t\t\tmargin: 0 auto;\n\t\t\tmargin-top: 30rpx;\n\t\t\tfont-size: 30rpx;\n\t\t\tbackground-color: #e9f3fb;\n\t\t\tborder: 1px solid #c3d8ee;\n\n\t\t\t.title {\n\t\t\t\tfont-size: 32rpx;\n\t\t\t\tcolor: #000;\n\t\t\t\tpadding-bottom: 20rpx;\n\t\t\t\tborder-bottom: 2px solid #0497FF;\n\t\t\t}\n\n\t\t\t>view {\n\t\t\t\tcolor: #333;\n\t\t\t\tmargin: 10px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: flex-start;\n\t\t\t\tjustify-content: flex-start;\n\n\t\t\t\tview {\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tmargin-right: 15rpx;\n\t\t\t\t\twidth: fit-content;\n\t\t\t\t\tword-break: keep-all;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.empty {\n\t\t\tmargin-top: 40rpx;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tfont-size: 44rpx;\n\t\t\tcolor: #0497FF;\n\t\t}\n\n\t\t.inject {\n\t\t\twidth: 180rpx;\n\t\t\theight: 70rpx;\n\t\t\tbackground: #34A853;\n\t\t\tborder-radius: 10rpx;\n\t\t\tcolor: #fff;\n\t\t\tmargin: 0 auto;\n\t\t\ttext-align: center;\n\t\t\tline-height: 70rpx;\n\t\t\tmargin-top: 30rpx;\n\t\t\tfont-size: 24rpx;\n\t\t}\n\n\t\t.injected-count {\n\t\t\tmargin: 10rpx 0;\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t.remove {\n\t\t\twidth: 180rpx;\n\t\t\theight: 70rpx;\n\t\t\tbackground: #EA4335;\n\t\t\tborder-radius: 10rpx;\n\t\t\tcolor: #fff;\n\t\t\tmargin: 0 auto;\n\t\t\ttext-align: center;\n\t\t\tline-height: 70rpx;\n\t\t\tmargin-top: 30rpx;\n\t\t\tfont-size: 24rpx;\n\t\t}\n\t}\n</style>","import MiniProgramPage from '/Users/zhangrui/Library/Mobile Documents/com~apple~CloudDocs/Desktop/桌面/WeChatApp/course-wechat/pages/electives/electives.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","uni","getElectivesAPI","onMounted","getCurrentDate","MiniProgramPage"],"mappings":"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"}